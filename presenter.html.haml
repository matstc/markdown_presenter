!!!
%title= title
%head
  %script{type:'text/javascript'}= yield 'js/jquery-1.10.2.min.js'
  %style= yield 'css/uikit.almost-flat.min.css'
  %script{type:'text/javascript'}= yield 'js/uikit.min.js'
  %meta{name:"viewport", content:"width=device-width, user-scalable=no"}

  :css
    * { margin: 0; font-family: Ubuntu, Sans-serif;}
    html, body { height: 100%; }
    .container {min-height: 100%; height: auto !important; height: 100%; margin: 0 auto -6em; overflow-x:hidden;}
    .progress-indicator {height: 5em;}
    .slide {display:none; position:relative; padding:2px; margin-top:3em; font-size:150%; line-height:1.5em;}
    .progress-indicator {display:inline-block;}
    .floating-indicator {margin:0 0 10px 10px; padding:10px; background-color:#ccc; border-radius:6px; font-size:150%;}
    .floating-indicator a {font-weight:bold;}
    .page-indicator {margin:0 10px; display:inline-block;}

%body
  .container
    .uk-grid
      .uk-width-large-1-4
        &#160;
      .uk-width-large-2-4
        - slides.each do |s|
          .slide= s
      .uk-width-large-1-4
        &#160;

  .progress-indicator
    .floating-indicator
      %a{href: "#previous", onclick:'P.previous(); return false;'}
        &lt;
      .page-indicator
        %span.current-slide-number= 1
        of
        = slides.size
      %a{href: "#next", onclick:'P.next(); return false;'}
        &gt;

  :javascript
    $(document).ready(function(){
      var slides = $(".slide");

      var current_slide_index = 0;

      var previous = function(){
        if (current_slide_index === 0) return false;
        show(--current_slide_index, function(slide){
          slide.css('left', -100);
          slide.animate({
            left: parseInt(slide.css('left'), 10) == 0 ?  -slide.outerWidth() : 0
          });
        });
      };

      var next = function(){
        if (current_slide_index === (slides.length - 1)) return false;
        show(++current_slide_index, function(slide){
          slide.css('left', 100);
          slide.animate({
            left: parseInt(slide.css('left'), 10) == 0 ?  +slide.outerWidth() : 0
          });
        });
      };

      var show = function(index, animation){
        slides.hide();
        var slide = slides.eq(index);
        slide.show();
        if (animation) animation(slide);
        $(".current-slide-number").text(index + 1);
      };

      $(document).keydown(function(e){
        if (e.keyCode == 37) { previous(); return false;}
        else if (e.keyCode == 39){ next(); return false;}
        return true;
      });
      
      show(0);

      P = {previous:previous, next:next};

      var progress_indicator = $(".progress-indicator");
      progress_indicator.css({ 'opacity' : 0.6 });

      progress_indicator.hover(function(){
        $(this).css({'opacity' : 1});
      }, function(){
        $(this).css({'opacity' : 0.6});
      });
    });

